### NodeController 안정임계값 테스트

### 테스트 환경

| 항목        | 설정                                         |
| ----------- | -------------------------------------------- |
| 서버 사양   | 4 Core / 4GB / SSD                           |
| DB          | PostgreSQL 17 + TimescaleDB                  |
| 커넥션 풀   | HikariCP max=80                              |
| Redis       | max-active=128                               |
| 테스트 도구 | k6 v0.52                                     |
| 부하 유형   | ramping-arrival-rate → constant-arrival-rate |
| 네트워크    | 내부 브릿지 (Docker Compose 환경)            |

### Stage별 P95(ms)

| Stage | Target RPS | Duration | P95(ms) |
| :---: | :--------: | :------: | :-----: |
|   0   |  200→240   |   60s    |    0    |
|   1   |  240→320   |   90s    |   304   |
|   2   |  320→400   |   90s    |   20    |
|   3   |  400→500   |   90s    |   158   |
|   4   |  500→600   |   90s    |   74    |
|   5   |  600 유지  |   180s   | **694** |

- 무릎점 600rps근처로 판단 -> 560부터 조금씩 올려가며 P95<300ms, fail-rate=0을 유지하는 안정구간을 확인
- 600RPS에서 부하테스트 요약결과

### 결과

=== k6 Summary (safe) ===<br>
avg latency: 86.29 ms<br>
p95 latency: 287.22 ms<br>
throughput: 601.53 req/s<br>
fail rate: 0.00%<br>

- 상세

| 구분       | RPS구간      |
| ---------- | ------------ |
| 목표 RPS   | 600rps       |
| throughput | 601.53 req/s |
| p95        | 287.22ms     |
| p90        | 215.67ms     |
| fail rate  | 0%           |

### 해석 및 결론

- 400 RPS까지는 완전 안정(p95 < 200ms, fail=0%)
- 500~600 RPS에서 응답 지연 상승 → **애플리케이션 레벨 병목 시작**
- 600 RPS에서도 p95=287ms, fail=0으로 **실질적 안정 한계는 약 600 RPS**
- CPU/GC/Redis 모두 정상 → DB가 아닌 **직렬화/GC/네트워크 I/O 구간 병목** 추정
- 따라서 **안정임계값(Stable Throughput) ≈ 600 RPS, 목표 P95<300ms 달성**
