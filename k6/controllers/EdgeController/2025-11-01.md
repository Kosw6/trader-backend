### EdgeController 테스트

### 테스트 환경

| 항목           | 설정                                                                                  |
| -------------- | ------------------------------------------------------------------------------------- |
| 서버 사양      | 4 Core / 16GB / SSD                                                                   |
| DB             | PostgreSQL 17 + TimescaleDB                                                           |
| 커넥션 풀      | HikariCP max=150,idle=80                                                              |
| Redis          | max-active=128                                                                        |
| 테스트 도구    | k6 v0.52                                                                              |
| 초기 부하 유형 | ramping-arrival 20rps 시작으로도 과부하 -><br>매우 낮은 constant-arrival-rate(5~7rps) |
| 네트워크       | 내부 브릿지 (Docker Compose 환경)                                                     |
| 데이터 구성    | 방대한 주식 OHLCV데이터로 구성되어 PostgreSQL의 TimeScaleDB로 확장, 데이터셋          |

### 안정 임계값 테스트

| Stage | Target RPS | Duration (s) |   p95 (ms) | Error Rate |
| :---: | ---------: | -----------: | ---------: | ---------: |
|   0   |        320 |           60 |  **21.93** |        0 % |
|   1   |        400 |           90 |  **14.33** |        0 % |
|   2   |        500 |           90 |  **14.60** |        0 % |
|   3   |        600 |           90 |  **81.44** |        0 % |
|   4   |        700 |           90 | **612.07** |        0 % |
|   5   |        700 |          180 | **738.83** |        0 % |

---

웜업
10% -> 20% -> 80%

RPS 600 90s
=== k6 Summary (phase:main) ===
avg latency: 29.02 ms
p95 latency: 128.36 ms
throughput: 194.59 req/s (avg over test)
throughput(active): 605.57 req/s (active-window)
fail rate: 0.00%

RPS 650
=== k6 Summary (phase:main) ===
avg latency: 46.38 ms
p95 latency: 206.41 ms
throughput: 210.63 req/s (avg over test)
throughput(active): 655.57 req/s (active-window)
fail rate: 0.00%

### 요약

RPS 600까지 안정, 700에서 응답 지연이 일어남

### 원인

RPS 700
=== k6 Summary (phase:main) ===
avg latency: 50.45 ms
p95 latency: 241.22 ms
throughput: 228.25 req/s (avg over test)
throughput(active): 710.57 req/s (active-window)
fail rate: 0.00%

- 700부근 확인 결과 700 RPS 이상 올라갈시에 P95 300ms를 넘기는 경우가 많았음

초기 SLO 600RPS P95 < 300ms 충분히 도달
